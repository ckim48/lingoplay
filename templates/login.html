<!doctype html>
<html lang="en" data-bs-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Login · EduWeaver</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="icon" href="{{ url_for('static', filename='favicon.png') }}" sizes="32x32" type="image/png">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='apple-touch-icon.png') }}">

    <style>
      :root{
        --ink:#0f1b33;
        --muted:#64748b;
        --surface:#ffffff;
        --line:#e5eaf3;
        --shadow:0 10px 30px rgba(2,6,23,.08);

        /* Sky palette (shared with final_view) */
        --sky-25:#f2f8ff; --sky-50:#e8f3ff; --sky-100:#d8ebff;
        --sky-200:#c2e0ff; --sky-300:#a5d1ff; --sky-400:#7fbaff;
        --sky-500:#4ea2ff; --sky-600:#2f8cea; --sky-700:#236fbb;

        --bg-grad:
          radial-gradient(1200px 600px at -10% -10%, var(--sky-50) 0%, #0000 60%),
          radial-gradient(900px 480px at 110% 10%, #eef2ff 0%, #0000 65%),
          linear-gradient(180deg, #f7fbff 0%, #f2f8ff 100%);
      }

      html, body{ min-height:100%; }
      body{
        background: var(--bg-grad);
        color: var(--ink);
        font-family: Inter, Nunito, "Noto Sans KR", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
        display:flex; align-items:center; justify-content:center;
        padding: 4vh 16px;
      }

      .login-card{
        width: 100%;
        max-width: 460px;
        background: var(--surface);
        border:1px solid var(--line);
        border-radius: 20px;
        box-shadow: var(--shadow);
        position: relative;
        overflow: hidden;
      }
      .card-body{ position:relative; z-index:1; padding: 2rem; }

      .login-card::before,
      .login-card::after{
        content:""; position:absolute; border-radius:50%;
        filter: blur(28px); opacity:.55; z-index:0; pointer-events:none;
      }
      .login-card::before{
        width:360px; height:360px; top:-140px; left:-140px;
        background: radial-gradient(closest-side, var(--sky-100) 0%, #fff0 70%);
      }
      .login-card::after{
        width:360px; height:360px; bottom:-140px; right:-140px;
        background: radial-gradient(closest-side, var(--sky-50) 0%, #fff0 70%);
      }

      .brand-display{
        font-family: Fredoka, Nunito, "Noto Sans KR", sans-serif;
        font-weight: 800; letter-spacing:.2px;
        color: var(--sky-700);
      }
      .subtitle{ color: var(--muted); }

      .form-label{
        font-weight: 700;
        font-size: .9rem;
        color: var(--muted);
        letter-spacing:.15px;
      }
      .input-group .input-group-text{
        background:#f8fafc;
        border:1px solid var(--line);
        border-right:0;
        color: var(--sky-700);
        border-radius:.8rem 0 0 .8rem;
      }
      .input-group .form-control{
        border-radius:0 .8rem .8rem 0;
        border:1px solid var(--line);
        border-left:0;
        padding:.9rem 1rem;
      }
      .form-control:focus{
        border-color: var(--sky-400);
        box-shadow: 0 0 0 .25rem rgba(47,140,234,.16);
      }

      .btn{ border-radius:.9rem; }
      .btn-sky{
        --bs-btn-color:#0b1224;
        --bs-btn-bg:var(--sky-200);
        --bs-btn-border-color:var(--sky-300);
        --bs-btn-hover-bg:var(--sky-300);
        --bs-btn-hover-border-color:var(--sky-400);
        --bs-btn-focus-shadow-rgb:47,140,234;
        --bs-btn-active-bg:var(--sky-400);
        --bs-btn-active-border-color:var(--sky-500);
        box-shadow: 0 10px 22px rgba(47,140,234,.18);
      }
      .btn-sky-solid{
        --bs-btn-color:#fff;
        --bs-btn-bg:var(--sky-600);
        --bs-btn-border-color:var(--sky-600);
        --bs-btn-hover-bg:var(--sky-700);
        --bs-btn-hover-border-color:var(--sky-700);
        --bs-btn-focus-shadow-rgb:47,140,234;
        --bs-btn-active-bg:var(--sky-700);
        --bs-btn-active-border-color:var(--sky-700);
        box-shadow: 0 10px 22px rgba(47,140,234,.28);
      }

      .muted-link{ color: var(--muted); text-decoration: none; }
      .muted-link:hover{ color: var(--ink); text-decoration: underline; }

      :focus-visible{
        outline: 3px solid color-mix(in oklab, var(--sky-500) 65%, white);
        outline-offset: 2px; border-radius:.6rem;
      }
    </style>
  </head>

  <body>
    <div class="login-card">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <h2 class="brand-display mb-0">Welcome Back</h2>
        </div>
        <p class="subtitle mb-4">Sign in to continue learning and creating stories.</p>

        {% if error %}
        <div class="alert alert-danger py-2 mb-3" role="alert">
          {{ error }}
        </div>
        {% endif %}

        <form method="post" class="vstack gap-3">
          <div>
            <label class="form-label">Username</label>
            <div class="input-group">
              <span class="input-group-text"><i class="bi bi-person"></i></span>
              <input type="text" name="username" class="form-control" required autocomplete="username" placeholder="yourname" />
            </div>
          </div>

          <div>
            <label class="form-label">Password</label>
            <div class="input-group">
              <span class="input-group-text"><i class="bi bi-shield-lock"></i></span>
              <input type="password" name="password" class="form-control" required autocomplete="current-password" placeholder="••••••••" />
            </div>
          </div>

          <button type="submit" class="btn btn-sky-solid w-100 py-3 mt-1">Sign in</button>

          <div class="text-center">
            <small class="text-secondary">
              Don’t have an account?
              <a class="muted-link fw-semibold" href="{{ url_for('register') }}">Create one</a>
            </small>
          </div>
        </form>
      </div>
    </div>
  </body>
</html>
